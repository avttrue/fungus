# Правила  

##  

<img src="qrc:/resources/img/rule.svg" height="32"/>

*Правило жизни поля имеет свойства и список активностей.*

## Свойства

* **Name** - *(имя) - это просто название правила, не должно быть пустым*
* **CurseTime** - *время, количество тиков поля, за которые клетка утратит свойство CURSED (никогда не утратит:* **-1** *)*

## Активность

*Список активностей - это основная часть правила.*

*Активность имеет следующую структуру:*

> set **Activity_Type** if cell is **State** and **Activity_Target** is **{ [Target_State] [Operand] [Operator] [Value] }** and than **ABORT_FLAG**

*Для примера, так выглядит правило для ЖИЗНИ Конуэя:*

> set **BIRTH** if cell is **DEAD** and **NEAR** is **{ ALIVE COUNT EQUAL 3 }** and than **ABORT**

> set **DEATH** if cell is **ALIVE** and **NEAR** is **{ ALIVE COUNT LESS 2 }** and than **ABORT**

> set **DEATH** if cell is **ALIVE** and **NEAR** is **{ ALIVE COUNT MORE 3 }** and than **ABORT**

*Активности выполняются по очереди из списка. Первая выполненная активность прерывает выполнение правила в текущем тике поля, если у активности выставлен флаг ABORT.*

*Активность проверяет* **текущее** *состояние клетки, и записавает результат в* **новое** *состояние клетки.* 

*Когда правило будет применено ко всем клеткам поля,* **новые** *состояния клеток станут* **текущими**. 

*Так завершается тик жизни поля.*

### Тип активности (Activity_Type)

* **BIRTH** - *(рожденье) установить состояние клетки в (живая)* **ALIVE**

* **DEATH** - *(смерть) установить состояние клетки в (мёртвая)* **DEAD**

* **CURCE** - *(проклятье) установить состояние клетки в (проклятая)* **CURSED**

* **NOTHING** - *ничего не делать (* **эксперимент** *)*

* **UP_AGE** - *увеличить возраст клетки на* **1** 

* **DOWN_AGE** - *уменьшить возраст клетки на* **1** *, но не меньше* **0**

* **INVERT** - *инвертировать состояние клетки (* **эксперимент** *)*

* **TRAIT** - *выставить флаг TRAIT (особенность) для клетки*

* **WO_TRAIT** - *сбросить флаг TRAIT (особенность) для клетки (***w***ith***o***ut trait)* 

### Состояние и состояние цели (State, Target_State)

*В этих параметрах активности просто указываются для проверки собственное состояние клетки и состояние целевой клетки.*

### Цель активности (Activity_Target)

* **SELF** - *собственные параметры клетки,* **Target_State** *проверяться не будет*

* **NEAR** - *параметры клеток вокруг*

* **GROUP** - *параметры клеток вокруг и собственные параметры клетки*

* **TOP** - *параметры клетки сверху*

* **TOPRIGHT** - *параметры клетки сверху-справа (по диагонали)*

* **RIGHT** - *параметры клетки справа*

* **BOTTOMRIGHT** - *параметры клетки снизу-справа (по диагонали)*

* **BOTTOM** - *параметры клетки снизу*

* **BOTTOMLEFT** - *параметры клетки снизу-слева (по диагонали)*

* **LEFT** - *параметры клетки слева*

* **TOPLEFT** - *параметры клетки сверху-слева (по диагонали)*

### Операнд активности (Operand)

* **COUNT** - *количество клеток (NEAR, GROUP, для SELF - всегда* **1** *)*

* **AGE** - *возраст клетки или суммарный возраст клеток (SELF, NEAR, GROUP)* 

* **GEN** - *значение поколения клетки или сумма поколений клеток (SELF, NEAR, GROUP)*

* **TRAIT** - *количество клеток с флагом TRAIT (SELF, NEAR, GROUP)*

### Оператор активности (Operator)

* **EQUAL** - *это оператор эквивалентный* **==**

* **MORE** - *это оператор эквивалентный* **>**

* **LESS** - *это оператор эквивалентный* **<**

* **NOT** - *это оператор эквивалентный* **!=**

* **IS_DIV** - *если* **Operand** *или* **Value** *имеют значение* **0** *будет возвращено* **ЛОЖЬ** *, в остальных случаях - делимость* **Operand** *на* **Value**.

### Параметр (Value)

*Это просто числовой параметр для применения оператора к операнду (***Operator** *к* **Operand***).*

### Флаг прерывания (ABORT_FLAG) 

*Этот флаг предназначен для прерывания выполнения правила после срабатывания активности, если флаг имеет значение ABORT.*


##  

##  

 ---
